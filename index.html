<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chathura Nirmal Weerasinghe</title>
    <link rel="icon" type="image/png" href="images/favicon.png" sizes="any">
    <link rel="shortcut icon" href="images/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="images/favicon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nothing+You+Could+Do&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        /* --- GLOBAL RESET & TYPOGRAPHY --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'EB Garamond', serif;
            line-height: 1.6;
            color: #333;
            background-color: #fdfdfd;
            font-size: 18px;
        }

        a {
            color: #0056b3;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: #003d82;
            text-decoration: underline;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* --- NAVBAR --- */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 1rem 5%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .hamburger {
            display: none;
        }

        .navbar-brand a {
            font-size: 1.8rem;
            font-weight: bold;
            color: #222;
        }

        .navbar-links ul {
            list-style: none;
            display: flex;
            gap: 1.5rem;
        }

        .navbar-links a {
            color: #555;
            font-weight: 300;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
        }

        .navbar-links a:hover {
            color: #0056b3;
            text-decoration: none;
        }

        /* --- HERO PROFILE HEADER (UPDATED) --- */
        .profile-header {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 65vh;
            min-height: 400px;
            padding: 0 5%;
            text-align: center;
            color: white;

            /* UPDATED: Removed linear-gradient overlay */
            background-image: url("images/website2.png");

            background-size: cover;
            background-position: center top;
            background-repeat: no-repeat;
        }

        /* --- SCROLL ZOOM PARALLAX EFFECT --- */
        .parallax-container {
            position: relative;
            overflow: hidden;
        }

        .parallax-bg {
            position: absolute;
            inset: 0;
            background-image: url("images/website2.png");
            background-size: cover;
            background-position: center top;
            background-repeat: no-repeat;
            transform-origin: center;
            z-index: 1;

            /* starting size */
            transform: scale(1.1);
        }

        .parallax-container .profile-text {
            position: relative;
            z-index: 5;
            /* text stays above image */
        }


        .profile-text h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            /* Kept text shadow so text remains readable on the raw image */
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
        }

        .profile-text h4 {
            font-weight: 400;
            color: #fff;
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.3rem;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
        }

        /* --- MAIN CONTAINER --- */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 1.5rem 3rem 1.5rem;
        }

        section {
            width: 100%;
            padding: 5rem 5%;
            margin-top: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        section>* {
            width: 100%;
            max-width: 1100px;
        }

        /* Alternating Backgrounds */
        section:nth-of-type(even) {
            background-color: #f7f9fb;
            /* Very subtle cool gray */
        }

        section:nth-of-type(odd) {
            background-color: #ffffff;
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #222;
            border-left: 4px solid #0056b3;
            padding-left: 1rem;
        }



        /* --- TEXT ALIGNMENT (BOXY SHAPE) --- */
        p,
        li {
            margin-bottom: 1.2rem;
            text-align: justify;
        }

        /* --- PROJECTS GRID --- */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .project-item {
            background: #f7f9fb;
            position: relative;
            cursor: pointer;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.08s ease, box-shadow 0.08s ease;
        }

        .project-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .project-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .project-item p {
            padding: 1rem;
            text-align: center;
            font-weight: bold;
            margin-bottom: 0;
        }

        /* --- STRETCHED LINK UTILITY --- */
        .stretched-link::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: 1;
            content: "";
        }

        /* --- CREATIVE CAROUSEL --- */
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 2rem auto;
            overflow: hidden;
            padding: 40px 0;
            /* Space for scaling */
        }

        .carousel-track {
            display: flex;
            align-items: center;
            gap: 20px;
            width: max-content;
            /* Allow items to flow naturally */
            will-change: transform;
        }

        .carousel-item {
            width: 200px;
            /* Fixed base width */
            height: 150px;
            object-fit: cover;
            border-radius: 12px;
            transition: transform 0.5s ease, opacity 0.5s ease, box-shadow 0.5s ease;
            opacity: 0.5;
            transform: scale(0.8);
            position: relative;
            z-index: 1;
        }

        .carousel-item.active {
            opacity: 1;
            transform: scale(1.4);
            /* Make center significantly larger */
            z-index: 10;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 20;
            color: #333;
            font-size: 1.2rem;
            transition: background 0.3s, transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-btn:hover {
            background: #f0f0f0;
            color: #0056b3;
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-btn.prev {
            left: 10px;
        }

        .carousel-btn.next {
            right: 10px;
        }

        /* --- VIDEO CAROUSEL SPECIFIC --- */
        .video-carousel-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            /* Wider for video */
            margin: 2rem auto;
            overflow: hidden;
            padding: 40px 0;
        }

        .video-carousel-track {
            display: flex;
            align-items: center;
            gap: 20px;
            width: max-content;
            will-change: transform;
        }

        .video-carousel-item {
            width: 400px;
            /* Wider cards for video */
            background: #f7f9fb;
            border-radius: 12px;
            overflow: hidden;

            transition: transform 0.5s ease, opacity 0.5s ease, box-shadow 0.5s ease;
            opacity: 0.5;
            transform: scale(0.85);
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
        }

        .video-carousel-item iframe {
            width: 100%;
            height: 225px;
            /* 16:9 ratio approx */
            border: none;
        }

        .video-info {
            padding: 1rem;
            text-align: left;
        }

        .video-info h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: #0056b3;
            font-style: italic;
        }

        .video-info p {
            font-size: 0.95rem;
            color: #000;
            margin-bottom: 0;
            text-align: justify;
            font-style: italic;
        }

        .video-carousel-item.active {
            opacity: 1;
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* --- THUMBNAIL FACADE --- */
        .video-thumbnail {
            position: relative;
            width: 100%;
            height: 225px;
            /* Match iframe height */
            background-color: #000;
            cursor: pointer;
            overflow: hidden;
        }

        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
            transition: opacity 0.3s;
        }

        .video-thumbnail:hover img {
            opacity: 1;
        }

        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;

            transition: all 0.3s ease;
        }

        .video-thumbnail:hover .play-button {
            background: #f00;
            /* Youtube Red */

            transform: translate(-50%, -50%) scale(1.1);
        }

        .video-carousel-item iframe {
            width: 100%;
            height: 225px;
            border: none;
            display: block;
            /* Ensures no gap */
        }



        /* --- SIMPLE LISTS --- */
        .simple-list {
            padding-left: 20px;
        }

        .simple-list li {
            margin-bottom: 0.8rem;
            text-align: justify;
        }

        .pub-title {
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
        }

        .pub-authors {
            font-size: 0.95rem;
            color: #666;
        }

        /* --- CONTACT LINKS --- */
        .contact-links {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
        }

        .contact-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #eee;
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            color: #333;
            font-weight: bold;
        }

        .contact-link:hover {
            background: #0056b3;
            color: white;
        }

        /* --- FOOTER --- */
        /* --- FOOTER (MATCHING HEADER) --- */
        .footer {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 2rem 5%;
            margin-top: 3rem;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        .footer-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 100%;
            margin: 0 auto;
            flex-wrap: wrap;
        }


        .footer-brand {
            font-size: 2rem;
            font-weight: bold;
            color: #222;
            font-family: 'EB Garamond', serif;
            font-style: italic;
            line-height: 1;
            /* Ensure tight bounding box for centering */
            display: inline-flex;
            align-items: center;
            border-left: 4px solid #0056b3;
            padding-left: 1rem;
        }



        .footer-nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
            margin: 0;
            padding: 0;
            align-items: center;
        }

        .footer-nav a {
            color: #555;
            font-weight: 300;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            line-height: 1;
            /* Ensure tight bounding box for centering */
            display: inline-block;
        }

        .footer-nav a:hover {
            color: #0056b3;
            text-decoration: none;
        }

        .footer-copyright {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.85rem;
            color: #666;
            margin-top: 1rem;
            border-top: 1px solid #ddd;
            padding-top: 1rem;
            width: 100%;
            display: flex;
            flex-direction: column;
            /* Stack vertically */
            gap: 0.5rem;
            align-items: center;
            justify-content: center;
            /* Centered Text */
            position: relative;
            /* Context for logo */
            min-height: 60px;
            /* Ensure space for logo */
        }

        /* --- ANIMATED LOGO EXPANDER --- */
        .logo-expander {
            position: static;
            /* Remove absolute positioning */
            transform: none;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            /* Add spacing below logo */
            border-radius: 25px;
            background-color: transparent;
            box-shadow: none;
            overflow: hidden;
            width: auto;
            /* Let content dictate width naturally, but we control max-width via children */
            padding: 0 5px;
            /* Little padding */
            cursor: pointer;
            z-index: 10;
        }

        .logo-letter,
        .logo-hidden {
            font-family: "Nothing You Could Do", cursive;
            font-weight: 400;
            font-style: normal;
            color: #222;
            font-size: 1.6rem;
            text-shadow: 0.5px 0.5px 0 #222;
            white-space: pre;
            padding-top: 4px;
        }

        /* The letters C, N, 's remain visible but might shift */
        .logo-letter {
            transition: transform 1.2s ease;
        }

        /* The parts that expand */
        .logo-hidden {
            display: inline-block;
            max-width: 0;
            opacity: 0;
            overflow: hidden;
            /* Slower duration and delay matching hover delay */
            transition: max-width 1.5s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 1.0s ease;
            vertical-align: bottom;
        }

        /* Hover States */
        /* Reveal the hidden parts with delay */
        .logo-expander:hover .logo-hidden {
            max-width: 350px;
            /* Increased for larger 1.6rem font */
            opacity: 1;
            transition-delay: 0.5s;
            /* Wait 0.5s before starting to show text */
        }

        /* Responsive adjustments for footer */
        @media (max-width: 768px) {
            .footer-bar {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .footer-brand a {
                font-size: 1.5rem;
            }

            .footer-nav ul {
                /* flex-direction: column; REMOVED to allow wrapping */
                justify-content: center;
                gap: 1rem;
            }

            .footer-nav a {
                font-size: 0.9rem;
            }

            /* Stack copyright and logo to avoid overlap - NOW GLOBAL */
            .footer-copyright {
                padding-bottom: 1rem;
            }

            .copyright-text {
                text-align: center;
                width: 100%;
            }

            .mobile-block {
                display: block;
                margin-top: 0.2rem;
            }
        }

        /* --- ACKNOWLEDGEMENT / QUOTE --- */
        /* --- ACKNOWLEDGEMENT / QUOTE --- */
        .acknowledgement {
            width: 100%;
            /* min-height removed */
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            padding: 0;
            text-align: center;
            color: #333;
        }

        .ack-quote {
            font-family: 'EB Garamond', serif;
            font-size: 1.4rem;
            font-style: italic;
            color: #000;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }

        .ack-note {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
            color: #555;
        }



        /* --- MOBILE RESPONSIVENESS --- */
        @media (max-width: 768px) {

            /* General text scaling for mobile */
            body {
                font-size: 15px;
            }

            p,
            li {
                font-size: 0.95rem;
                line-height: 1.5;
            }

            .navbar {
                flex-direction: column;
                padding: 1rem;
            }

            .navbar-brand {
                margin-bottom: 0.5rem;
            }

            /* Reduced font size for navbar name to prevent wrapping */
            .navbar-brand a {
                font-size: 1.2rem;
            }

            .navbar-links ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
                font-size: 0.85rem;
            }

            .profile-header {
                height: 50vh;
                padding: 0 1rem;
            }

            /* Reduced font size for profile name */
            .profile-text h1 {
                font-size: 1.4rem;
            }

            .profile-text h4 {
                font-size: 0.9rem;
            }

            /* Reduced topic (section header) font sizes */
            h2 {
                font-size: 1.5rem;
            }

            /* Subheaders */
            h3 {
                font-size: 1.1rem;
            }

            .contact-links {
                flex-direction: column;
                width: 100%;
            }

            .contact-link {
                justify-content: center;
                font-size: 0.9rem;
            }
        }

        /* --- SCROLL ANIMATION --- */
        .hidden-element {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .show-element {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Mobile Dropdown Menu --- */
        .navbar-links {
            transition: max-height 0.3s ease;
        }

        @media (max-width: 768px) {

            .navbar {
                flex-direction: row;
                justify-content: space-between;
            }

            /* Hide the normal horizontal menu */
            .navbar-links ul {
                flex-direction: column;
                width: 100%;
                padding: 1rem 0;
            }

            .navbar-links {
                width: 100%;
                overflow: hidden;
                max-height: 0;
                /* hidden by default */
            }

            /* Show hamburger icon on mobile */
            .hamburger {
                display: block;
                color: #333;
            }

            /* When active, menu expands */
            .navbar-links.active {
                max-height: 400px;
                /* background and shadow removed to match header transparency */
            }

            .navbar-links ul li {
                text-align: center;
                padding: 0.8rem 0;
            }

            /* --- Animated Hamburger Icon --- */
            .hamburger {
                display: block;
                cursor: pointer;
                width: 24px;
                /* Reduced from 30px */
                height: 18px;
                /* Reduced from 24px */
                position: relative;
                z-index: 1100;
                /* Ensure above menu */
                display: flex;
                /* Flex to align bars if needed, but absolute pos is used below */
                flex-direction: column;
                justify-content: space-between;
            }

            .bar {
                display: block;
                width: 100%;
                height: 2px;
                /* Reduced from 3px */
                background-color: #333;
                border-radius: 2px;
                transition: all 0.3s ease-in-out;
            }

            /* Animation States */
            .hamburger.active .bar:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active .bar:nth-child(1) {
                /* (18px - 2px) / 2 = 8px translation */
                transform: translateY(8px) rotate(45deg);
            }

            .hamburger.active .bar:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }

            /* --- Video Carousel Mobile Optimization --- */
            .video-carousel-container {
                max-width: 100%;
                padding: 20px 0;
            }

            .video-carousel-item {
                width: 280px;
                /* Smaller width for mobile */
                transform: scale(0.9);
            }

            .video-carousel-item.active {
                transform: scale(1);
            }

            .video-carousel-item iframe,
            .video-thumbnail {
                height: 158px;
                /* Maintain 16:9 ratio for 280px width */
            }

            .video-info {
                padding: 0.75rem;
            }

            .video-info h3 {
                font-size: 1rem;
            }

            .video-info p {
                font-size: 0.85rem;
                line-height: 1.4;
            }

            .carousel-btn {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }

            .carousel-btn.prev {
                left: 5px;
            }

            .carousel-btn.next {
                right: 5px;
            }

        }
    </style>
</head>

<body>

    <header class="navbar">
        <div class="navbar-brand">
            <a href="#"><em>Chathura Nirmal Weerasinghe</em></a>
        </div>

        <!-- HAMBURGER ICON -->
        <div class="hamburger" onclick="toggleMenu()">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>

        <!-- NAV LINKS -->
        <nav class="navbar-links" id="mobileMenu">
            <ul>
                <li><a href="#biography">Biography</a></li>
                <li><a href="#experience">Experience</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#publications">Publications</a></li>
                <li><a href="#honors">Awards</a></li>
                <!-- <li><a href="#certifications">Certifications</a></li> -->
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>


    <div class="profile-header parallax-container">
        <div class="parallax-bg"></div>
        <div class="profile-text">
            <h1><em>Chathura Nirmal Weerasinghe</em></h1>
            <h4><em>Passionate about Wearables | Human Computer Interaction | Edge Computing</em></h4>
        </div>
    </div>


    <!-- Main Sections -->

    <section id="biography" class="about hidden-element">
        <h2><em>Biography</em></h2>
        <p>
            I’m <a href="https://www.linkedin.com/in/chathuranirmalweerasinghe"><em>Chathura Nirmal
                    Weerasinghe</em></a>. I am an Electronic Engineering Undergraduate, specializing in Biomedical
            Engineering at the University of Moratuwa. I am passionate about <strong>Wearables, Human Computer
                Interaction,</strong> and <strong>Edge Computing.</strong>
        </p>
        <p>
            In my <strong>Research Experience</strong>, I previously worked as a Research Intern at the <a
                href="https://exertiongameslab.org/" target="_blank"><em>Exertion Games Lab</em></a> at Monash
            University, supervised by <a href="https://research.monash.edu/en/persons/don-samitha-elvitigala"
                target="_blank"><em>Dr. Don Samitha Elvitigala</em></a> and <a
                href="https://www.florianfloydmueller.com/" target="_blank"><em>Prof. Florian 'Floyd'
                    Mueller</em></a>. My work focused on developing wearable systems, including 'VibroBits,' a
            vibrotactile feedback system for sports training. I also provided technical engineering support for
            various PhD projects, such as gaze aversion detection and lucid dream induction studies, and was
            involved in the research process from initial analysis to manuscript revision.
        </p>
        <p>
            In my <strong>Product Development Experience</strong>, I contributed to <a
                href="http://chathuranirmal.com/MeasureUP/"><em>MeasureUP</em></a>, a World Bank funded project to
            develop a portable height measuring device. We used K means clustering to address signal loss from dense
            scalp hair in ultrasound readings. The project was commercially launched, and I gained experience in
            medical product development and regulatory compliance under <a
                href="https://enterprise.uom.lk/dr-ajith-a-pasqual/" target="_blank"><em>Dr. Ajith
                    Pasqual</em></a>.
        </p>
        <p>
            In my academic background, I received <a
                href="https://www.linkedin.com/in/chathuranirmalweerasinghe/details/honors/"><em>bronze medals for
                    both the Physics and Mathematics Olympiad and secured the 9th place representing Sri Lanka at
                    the 12th Statistics Olympiad in 2020</em></a>. For the GCE Advanced Level exam, I was ranked
            99th out of 34,389 candidates, placing within the top 0.3% nationally, with A’s in all four subjects
            Maths, Physics, Chemistry, and English.
        </p>
        <p>
            In my free time, I am interested in video and graphic designing, as well as scriptwriting and acting in
            dramas. Here, I have attached some of my dramas. Go and see "What the Sense of Humor through an
            Engineering Eye is." <a href="https://youtu.be/yPXYBtht1XQ?feature=shared"><em>1."Latha.AI"</em></a> ,
            <a href="https://youtu.be/5t9_GxEX5Pk?feature=shared"><em>2."Parakiyana Tharuka"</em></a>.
        </p>
    </section>

    <section id="experience" class="hidden-element">
        <h2><em>Experience</em></h2>
        <p>
            I am a former Research Intern at the award winning <a href="https://exertiongameslab.org/"
                target="_blank"><em>Exertion Games Lab</em></a> at Monash University, working under the supervision
            of <a href="https://research.monash.edu/en/persons/don-samitha-elvitigala" target="_blank"><em>Dr. Don
                    Samitha Elvitigala</em></a> and <a href="https://www.florianfloydmueller.com/"
                target="_blank"><em>Prof. Florian 'Floyd' Mueller</em></a>. My tenure focused on developing novel
            wearable systems, notably <a href="https://doi.org/10.1145/3749385.3749418"
                target="_blank"><em></em>'VibroBits,' a vibrotactile feedback system for sports training demonstrated at
                SportsHCI ’25</em></a>, for
            which I was the first author.
        </p>
        <p>
            Beyond my primary research, I provided technical engineering for several PhD initiatives: I developed a
            gaze aversion detection system using Tobii Eye-Trackers and embedded modules for <a
                href="https://www.nathalieoverdevest.com/understanding-embodied-remembering/"
                target="_blank"><em>Nathalie Overdevest's 'Embodied Remembering' project</em></a>, and prototyped
            wireless olfactory and thermal devices for <a
                href="https://exertiongameslab.org/projects/lucientry-a-lucid-dream-induction-system"
                target="_blank"><em>Poyao 'Cosmos' Wang’s lucid dream induction study</em></a>. Additionally, I
            designed AR navigation systems using HoloLens 2 for <a
                href="https://www.linkedin.com/in/linjia-he-90123b323" target="_blank"><em>Linjia He’s research on
                    cyclist attention</em></a>, while also assisting in the associated systematic review. Throughout
            the internship, I executed full-cycle research workflows from gap analysis to manuscript revision and
            actively engaged in the lab’s scholarly culture.
        </p>
        <!-- Creative Carousel -->
        <div class="carousel-container">
            <button class="carousel-btn prev" onclick="movePrev()"><i class="fa-solid fa-chevron-left"></i></button>

            <div class="carousel-track" id="experienceTrack">
                <img src="images/exp_arm_1.jpg" class="carousel-item" alt="Wearable Device 1">
                <img src="images/exp_device_close.jpg" class="carousel-item" alt="Device Close Up">
                <img src="images/exp_arm_2.jpg" class="carousel-item" alt="Wearable Device 2">
                <img src="images/exp_vibrobits_prototype.jpg" class="carousel-item active" alt="VibroBits Prototype">
                <!-- Start middle active -->
                <img src="images/exp_group_outdoor.jpg" class="carousel-item" alt="Outdoor Team">
                <img src="images/exp_green_sleeve.jpg" class="carousel-item" alt="Smart Sleeve">
                <img src="images/exp_yellow_insoles.jpg" class="carousel-item" alt="Smart Insoles">
                <img src="images/exp_sensor_straps.png" class="carousel-item" alt="Sensor Straps">
                <img src="images/exp_leg_sensors.png" class="carousel-item" alt="Leg Sensors Setup">
                <img src="images/exp_group_lunch.jpg" class="carousel-item" alt="Group Lunch Outdoor">
            </div>

            <button class="carousel-btn next" onclick="moveNext()"><i class="fa-solid fa-chevron-right"></i></button>
        </div>
    </section>

    <section id="projects" class="projects hidden-element">
        <h2><em>Projects</em></h2>

        <!-- Video Carousel -->
        <div class="video-carousel-container">
            <button class="carousel-btn prev" onclick="moveVideoPrev()"><i
                    class="fa-solid fa-chevron-left"></i></button>

            <div class="video-carousel-track" id="videoTrack">
                <!-- BLOCK 1 -->
                <div class="video-carousel-item hidden-element">
                    <div class="video-thumbnail" onclick="loadVideo(this, 'sQCjLG8IDWM')">
                        <img src="https://img.youtube.com/vi/sQCjLG8IDWM/hqdefault.jpg" alt="Project Alpha Video">
                        <div class="play-button"><i class="fa-solid fa-play"></i></div>
                    </div>
                    <div class="video-info">
                        <h3>ECG Signal Monitoring System</h3>
                        <p>Designed an analog circuit for ECG signal extraction using Right Leg Drive and
                            multi stage filtering. Analyzed Op Amp parameters and validated filter effectiveness
                            using FFT techniques.</p>
                    </div>
                </div>

                <!-- BLOCK 2 -->
                <div class="video-carousel-item active">
                    <div class="video-thumbnail" onclick="loadVideo(this, '7pyx1O3m0lo')">
                        <img src="https://img.youtube.com/vi/7pyx1O3m0lo/hqdefault.jpg" alt="Project Beta Video">
                        <div class="play-button"><i class="fa-solid fa-play"></i></div>
                    </div>
                    <div class="video-info">
                        <h3>Ultrasound Height Measurement</h3>
                        <p>Developed a K means clustering algorithm to classify ultrasound reflections from dense
                            scalp hair, achieving 3cm accuracy. Addressed signal loss issues and preprocessed
                            datasets for robust detection.</p>
                    </div>
                </div>

                <!-- BLOCK 3 -->
                <div class="video-carousel-item hidden-element">
                    <div class="video-thumbnail" onclick="loadVideo(this, 'Jsa-tMu-xNg')">
                        <img src="https://img.youtube.com/vi/Jsa-tMu-xNg/hqdefault.jpg" alt="Project Gamma Video">
                        <div class="play-button"><i class="fa-solid fa-play"></i></div>
                    </div>
                    <div class="video-info">
                        <h3>MeasureUP - Portable BMI Device</h3>
                        <p>Led a World Bank funded team to develop a cost effective portable BMI device. Utilized
                            K means clustering for precision and managed FDA compliant product design and
                            documentation.</p>
                    </div>
                </div>

                <!-- BLOCK 4 -->
                <div class="video-carousel-item hidden-element">
                    <div class="video-thumbnail" onclick="loadVideo(this, 'hekbByAiC-E')">
                        <img src="https://img.youtube.com/vi/hekbByAiC-E/hqdefault.jpg" alt="VibroBits Project Video">
                        <div class="play-button"><i class="fa-solid fa-play"></i></div>
                    </div>
                    <div class="video-info">
                        <h3>VibroBits: Visualising CoP Using Vibrotactile Feedback</h3>
                        <p>A novel wearable system delivering real-time vibrotactile feedback of the Center of Pressure
                            (CoP) via smart insoles. Designed to enhance body awareness and stability for sports
                            training and rehabilitation.</p>
                    </div>
                </div>
            </div>

            <button class="carousel-btn next" onclick="moveVideoNext()"><i
                    class="fa-solid fa-chevron-right"></i></button>
        </div>

        <div class="projects-grid">

            <div class="project-item hidden-element">
                <img src="images/FYP.png" alt="BCI Game Project">
                <p><a href="https://github.com/fyp21-bci/.github" class="stretched-link"><em>Brain Computer Interface
                            Game for a Locked In
                            Pediatric Patient (Ongoing)</em></a></p>
            </div>


            <div class="project-item hidden-element">
                <img src="images/Measureup.png" alt="MeasureUP Project">
                <p><a href="http://chathuranirmal.com/MeasureUP/" class="stretched-link"><em>World
                            Bank funded AHEAD Project to Develop a Portable BMI Measuring Device for Clinical
                            Settings.</em></a></p>
            </div>

            <div class="project-item hidden-element">
                <img src="images/Zerogravity.png" alt="Zero G Project">
                <p><a href="https://github.com/chathuracns/Zero-G-Dynamic-Body-Weight-Support-System-Using-a-Motorized-Unloader"
                        class="stretched-link"><em>Zero
                            G Dynamic Body Weight Support System Using a Motorized Unloader</em></a></p>
            </div>

            <div class="project-item hidden-element">
                <img src="images/ECG.png" alt="ECG Project">
                <p><a href="https://github.com/chathuracns/ECG-Signal-Extracting-and-Monitoring-Using-Analog-Electronics-and-wet-electrodes"
                        class="stretched-link"><em>ECG
                            Signal Extracting and Monitoring Using Analog Electronics and Wet Electrodes</em></a>
                </p>
            </div>

            <div class="project-item hidden-element">
                <img src="images/DenseScalp.png" alt="Human Height Project">
                <p><a href="https://github.com/chathuracns/Human-Height-Measuring-Under-Low-Ultrasound-Reflection-due-to-Dense-Scalp-Hair"
                        class="stretched-link"><em>Human
                            Height Measuring Under Low Ultrasound Reflection due to Dense Scalp Hair</em></a></p>
            </div>

        </div>
    </section>

    <section id="publications" class="hidden-element">
        <h2><em>Publications</em></h2>
        <ul class="simple-list">
            <li>
                <h4 class="pub-title">
                    <a href="https://doi.org/10.1145/3749385.3749418" target="_blank">
                        VibroBits: Visualising Body Centre of Pressure Using Vibrotactile Feedback for Sports
                        Training
                    </a>
                </h4>
                <p class="pub-authors">
                    <strong> Chathura Nirmal Weerasinghe </strong>, Ruchira Abeywardhane, Uvindu Kodikara, Sasindu
                    Abewickrema, Nihar Sabnis, Florian ’Floyd’ Mueller, Don Samitha Elvitigala
                    • SportsHCI '25: Proceedings of the First Annual Conference on Human Computer Interaction and
                    Sports • November 2025
                </p>
            </li>
            <li>
                <h4 class="pub-title">
                    <a href="https://doi.org/10.1145/3749385.3749413" target="_blank">
                        GestureSock++: Toe Gestures as Alternative Input Method while Cycling
                    </a>
                </h4>
                <p class="pub-authors">
                    Vincent van Rheden, Sasindu Abewickrema, Uvindu Kodikara, Ruchira Abeywardhane, <strong>
                        Chathura Weerasinghe </strong>, Florian ’Floyd’ Mueller, Don Samitha Elvitigala
                    • SportsHCI '25: Proceedings of the First Annual Conference on Human Computer Interaction and
                    Sports • November 2025
                </p>
            </li>
        </ul>
    </section>

    <section id="honors" class="hidden-element">
        <h2><em>Honors & Awards</em></h2>
        <ul class="simple-list">
            <li><strong>Bronze Medalist</strong> at the Sri Lankan Mathematics Olympiad Competition - 2019 - Awarded by
                <a href="https://www.slmathsolympiad.org/" target="_blank"><em>Sri Lanka Mathematics Olympiad
                        Foundation</em></a>
            </li>
            <li><strong>Bronze Medalist</strong> at the Sri Lankan Physics Olympiad Competition - 2019 - Awarded by <a
                    href="https://ipsl.lk/" target="_blank"><em>Institute of Physics Sri Lanka</em></a></li>
            <li><strong>Finalist</strong> at the Sri Lankan Chemistry Olympiad Competition - 2019 - Awarded by <a
                    href="https://ichemc.ac.lk/" target="_blank"><em>Institute of Chemistry Ceylon</em></a></li>
            <li><strong>A Winner</strong> at the National Statistics Olympiad Competition - 2018 - 2019 - Awarded by <a
                    href="https://iassl.lk/" target="_blank"><em>Institute of Applied Statistics Sri Lanka</em></a></li>
            <li><strong>Secured 9th place in the senior category</strong> representing Sri Lanka at the 12th Statistics
                Olympiad. Issued by <a href="https://crraoaimscs.res.in/" target="_blank"><em>C. R. Rao Advanced
                        Institute of Mathematics, Statistics and Computer Science (AIMSCS)</em></a>, University of
                Hyderabad Campus, Hyderabad</li>
        </ul>
    </section>

    <!--
    <section id="certifications" class="hidden-element">
        <h2><em>Licenses & Certifications</em></h2>
        <ul class="simple-list">
            <li>
                <strong>Improving Deep Neural Networks: Hyperparameter Tuning, Regularization and
                    Optimization</strong> - DeepLearning.AI (Jun 2024) - <a
                    href="https://www.coursera.org/account/accomplishments/records/NSNDL2ZSAQHP" target="_blank">ID:
                    NSNDL2ZSAQHP</a>
            </li>
            <li>
                <strong>Neural Networks and Deep Learning</strong> - DeepLearning.AI (Jun 2024) - <a
                    href="https://www.coursera.org/account/accomplishments/records/93TVAQH9GYHQ" target="_blank">ID:
                    93TVAQH9GYHQ</a>
            </li>
            <li>
                <strong>Structuring Machine Learning Projects</strong> - DeepLearning.AI (Jun 2024) - <a
                    href="https://www.coursera.org/account/accomplishments/records/RPFERV8MJQ72" target="_blank">ID:
                    RPFERV8MJQ72</a>
            </li>
            <li>
                <strong>Public Speaking Course for Young Adults</strong> - American Corner Kandy (Mar 2023) - <a
                    href="https://www.linkedin.com/in/chathuranirmalweerasinghe/details/certifications/1723379874210/single-media-viewer?type=IMAGE&profileId=ACoAADYPmsgBDxATZnMBMFcJtfSfmUgngpdZ4SU&lipi=urn%3Ali%3Apage%3Ad_flagship3_profile_view_base_certifications_details%3B%2BTrFd%2BAGR8mexp52bRrXgg%3D%3D"
                    target="_blank">View Certificate</a>
            </li>
        </ul>
    </section>
    -->

    <!-- FOOTER -->
    <footer id="contact" class="footer hidden-element">
        <div class="footer-bar">
            <!-- Left Side: "Contact" Brand Style -->
            <div class="footer-brand">
                <em>Contact</em>
            </div>

            <!-- Right Side: Navbar-like Links (No Icons) -->
            <nav class="footer-nav">
                <ul>
                    <li><a href="mailto:chathuranirmalweerasinghe@gmail.com"><i class="fa-solid fa-envelope"></i>
                            chathuranirmalweerasinghe@gmail.com</a>
                    </li>
                    <li><a href="https://scholar.google.com/citations?view_op=list_works&hl=en&user=waU2EqsAAAAJ"
                            target="_blank"><i class="fa-solid fa-graduation-cap"></i> Google Scholar</a></li>
                    <li><a href="https://orcid.org/0009-0005-8288-937X" target="_blank"><i
                                class="fa-brands fa-orcid"></i> ORCID</a></li>
                    <li><a href="https://www.linkedin.com/in/chathuranirmalweerasinghe" target="_blank"><i
                                class="fa-brands fa-linkedin"></i> LinkedIn</a>
                    </li>
                    <li><a href="https://github.com/chathuracns" target="_blank"><i class="fa-brands fa-github"></i>
                            GitHub</a></li>
                    <li><a href="https://www.youtube.com/@ChathuraNirmalWeerasinghe" target="_blank"><i
                                class="fa-brands fa-youtube"></i> YouTube</a></li>
                </ul>
            </nav>
        </div>

        <!-- ACKNOWLEDGEMENT / QUOTE MOVED HERE -->
        <section class="acknowledgement" aria-labelledby="ack-title">
            <div>
                <blockquote class="ack-quote">"My achievements are built on the foundation of free education, I am
                    deeply
                    grateful to the Government of Sri Lanka and to the taxpayers whose investment in free education made
                    these opportunities possible."</blockquote>
            </div>
        </section>

        <div class="footer-copyright">
            <div class="logo-expander">
                <span class="logo-letter">C</span>
                <span class="logo-hidden">hathura </span>
                <span class="logo-letter">N</span>
                <span class="logo-hidden">irmal</span>
                <span class="logo-letter">'s</span>
            </div>
            <div class="copyright-text">
                © 2025 Chathura Nirmal Weerasinghe. <span class="mobile-block">All rights reserved.</span>
            </div>
        </div>
    </footer>

    <script>
        window.addEventListener("scroll", function () {

            const scrolled = window.scrollY;
            const img = document.querySelector(".parallax-bg");

            if (!img) return;

            // How many pixels to move the image
            const yOffset = scrolled * 0.25;   // Lower = slower parallax

            // How much to zoom based on scroll
            const scale = 1.1 + scrolled * 0.0002;

            img.style.transform = `translateY(${yOffset}px) scale(${scale})`;
        });
    </script>
    <script>
        function toggleMenu() {
            const menu = document.getElementById("mobileMenu");
            const hamburger = document.querySelector(".hamburger");

            menu.classList.toggle("active");
            hamburger.classList.toggle("active");
        }

        function closeMenu() {
            const menu = document.getElementById("mobileMenu");
            const hamburger = document.querySelector(".hamburger");

            if (menu.classList.contains("active")) {
                menu.classList.remove("active");
                hamburger.classList.remove("active");
            }
        }

        // 1. Close menu automatically when clicking any menu link
        document.querySelectorAll("#mobileMenu a").forEach(item => {
            item.addEventListener("click", closeMenu);
        });

        // 2. Close menu when clicking outside the menu or hamburger
        document.addEventListener("click", function (event) {
            const menu = document.getElementById("mobileMenu");
            const hamburger = document.querySelector(".hamburger");

            // If menu is open AND clicked outside both menu and hamburger → close it
            if (menu.classList.contains("active") &&
                !menu.contains(event.target) &&
                !hamburger.contains(event.target)) {
                closeMenu();
            }
        });
    </script>
    <script>
        // Smooth scroll with dynamic offset equal to navbar height
        document.querySelectorAll('.navbar-links a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const navbar = document.querySelector('.navbar');
                const menu = document.getElementById("mobileMenu");
                const target = document.querySelector(this.getAttribute('href'));

                // Get real-time navbar height (changes on mobile)
                const offset = navbar.offsetHeight;

                // Where to scroll = section top minus current navbar height
                const position = target.getBoundingClientRect().top + window.pageYOffset - offset;

                window.scrollTo({
                    top: position,
                    behavior: "smooth"
                });

                // Close menu after clicking
                if (typeof closeMenu === 'function') {
                    closeMenu();
                } else {
                    menu.classList.remove("active");
                }
            });
        });

        // (Duplicate "Close menu when clicking outside" listener removed)
    </script>


    <script>
        /* --- FIXED OFFSET SMOOTH CAROUSEL LOGIC --- */
        let autoPlayInterval;
        const ITEM_WIDTH = 200;
        const GAP = 20;
        const TOTAL_ITEM_WIDTH = ITEM_WIDTH + GAP;
        let isAnimating = false;

        // Helper: Align the track so the Middle Item is centered in the container
        function alignTrack(animate = false) {
            const track = document.getElementById('experienceTrack');
            const container = document.querySelector('.carousel-container');
            const items = Array.from(track.children);

            if (items.length === 0) return;

            // We always want the middle item (index 3 for 7 items) to be effectively active/centered
            const middleIndex = Math.floor(items.length / 2);

            // Calculate where the center of that item is relative to the start of the track
            // Left space = (Index * TotalWidth) + Half an Item
            const trackItemCenter = (middleIndex * TOTAL_ITEM_WIDTH) + (ITEM_WIDTH / 2);

            // Calculate center of container
            const containerCenter = container.offsetWidth / 2;

            // The transform needed to put that item center at container center
            const offset = containerCenter - trackItemCenter;

            if (animate) {
                track.style.transition = "transform 0.5s ease-in-out";
            } else {
                track.style.transition = "none";
            }

            track.style.transform = `translateX(${offset}px)`;

            // Update styling
            items.forEach(item => item.classList.remove('active'));
            if (items[middleIndex]) items[middleIndex].classList.add('active');

            return offset;
        }

        function moveNext() {
            if (isAnimating) return;
            isAnimating = true;

            const track = document.getElementById('experienceTrack');
            const baseOffset = alignTrack(false); // Get current centered position (no anim)

            // 1. Prepare Next Active Item (Zoom Effect)
            // Standard logic: current middle fades, next one grows.
            const items = Array.from(track.children);
            const middleIndex = Math.floor(items.length / 2);
            items[middleIndex].classList.remove('active');
            items[middleIndex + 1].classList.add('active');

            // 2. Animate Track Left
            // We move exactly one item width to the left
            requestAnimationFrame(() => {
                track.style.transition = "transform 0.5s ease-in-out";
                track.style.transform = `translateX(${baseOffset - TOTAL_ITEM_WIDTH}px)`;
            });

            // 3. Cleanup after animation
            setTimeout(() => {
                track.style.transition = "none";
                track.appendChild(track.firstElementChild); // Move first to last

                // Re-Align instantly (because we changed DOM, the "new" middle needs to be centered)
                // Since we moved the track physically left AND shifted DOM, realigning should put us visually close to same spot
                alignTrack(false);

                isAnimating = false;
            }, 500);
        }

        function movePrev() {
            if (isAnimating) return;
            isAnimating = true;

            const track = document.getElementById('experienceTrack');

            // 1. Instant Setup: Move last to first
            // But we need to offset the track so it looks like nothing happened yet
            track.prepend(track.lastElementChild);

            // Get normal center, then shift it left by one item so visually we look like "before" the move
            const baseOffset = alignTrack(false);
            track.style.transition = "none";
            // We want to start from "Left" of center so we can slide "Right" to center
            track.style.transform = `translateX(${baseOffset - TOTAL_ITEM_WIDTH}px)`;

            // Force Reflow
            void track.offsetWidth;

            // 2. Animate to Center
            // Also Trigger Zoom
            const items = Array.from(track.children);
            const middleIndex = Math.floor(items.length / 2);
            // We are moving TO the middle index
            items.forEach(i => i.classList.remove('active'));
            items[middleIndex].classList.add('active');

            requestAnimationFrame(() => {
                track.style.transition = "transform 0.5s ease-in-out";
                track.style.transform = `translateX(${baseOffset}px)`;
            });

            setTimeout(() => {
                isAnimating = false;
            }, 500);
        }

        function startAutoPlay() {
            stopAutoPlay();
            autoPlayInterval = setInterval(moveNext, 3000);
        }

        function stopAutoPlay() {
            clearInterval(autoPlayInterval);
        }

        // Init & Resize Handler
        document.addEventListener("DOMContentLoaded", () => {
            alignTrack(false);
            startAutoPlay();

            const container = document.querySelector('.carousel-container');
            container.addEventListener('mouseenter', stopAutoPlay);
            container.addEventListener('mouseleave', startAutoPlay);

            // Re-center on resize
            window.addEventListener('resize', () => {
                if (!isAnimating) alignTrack(false);
            });
        });
    </script>
    <script>
        /* --- VIDEO CAROUSEL LOGIC --- */
        // Separate scope/variables to avoid conflict with Experience carousel
        let isVideoAnimating = false;

        function getVideoMetrics() {
            const track = document.getElementById('videoTrack');
            if (!track) return { itemWidth: 0, gap: 0, totalWidth: 0, items: [] };

            const items = Array.from(track.children);
            const firstItem = items[0];
            const itemWidth = firstItem ? firstItem.offsetWidth : 0;

            const styles = window.getComputedStyle(track);
            const gapStr = (styles.columnGap || styles.gap || '0px');
            const gap = parseFloat(gapStr) || 0;

            return { itemWidth, gap, totalWidth: itemWidth + gap, items };
        }

        function ensureOddItems() {
            const track = document.getElementById('videoTrack');
            if (!track) return;
            let items = Array.from(track.children);

            // We need 5 items minimum for smooth infinite scroll with 1 center + 2 neighbors each side
            // AND we want an odd number so the math is clean.
            // If < 5 or even, we clone.
            // Strategy: Keep cloning until we have at least 5 AND it is odd.

            // Safety break
            let loops = 0;
            while ((items.length < 5 || items.length % 2 === 0) && loops < 5) {
                // Determine how many to add.
                // If we need more items, just duplicate the whole initial set and loop again.
                // We clone all current items to preserve the sequence pattern (1,2,3,4 -> 1,2,3,4,1,2,3,4)

                // Be careful not to exponential loop forever if initial set is empty (handled by check above)
                const currentItems = Array.from(track.children);
                if (currentItems.length === 0) break;

                // Clone them
                currentItems.forEach(item => {
                    const clone = item.cloneNode(true);
                    // Remove active class from clones to be safe
                    clone.classList.remove('active');
                    // CRITICAL FIX: Remove hidden-element class so clones are visible
                    // (they are created after observer init, so they would stay hidden otherwise)
                    clone.classList.remove('hidden-element');
                    clone.classList.remove('show-element');
                    track.appendChild(clone);
                });

                // Update items array for next check
                items = Array.from(track.children);
                loops++;
            }

            // If we ended up with even number after simply duplicating (e.g. 4 -> 8),
            // remove the last one to make it odd (e.g. 7).
            // Or add one more clone of the first item?
            // Actually, infinite scrolling works best if the sequence repeats.
            // 4 items: A B C D.
            // Clone -> A B C D A B C D (8 items).
            // We want odd. Remove last? A B C D A B C (-D).
            // Sequence: A B C D A B C.
            // Next would be 'A'.
            // Infinite scroll logic: moving last to first or first to last handles the continuity.
            // So yes, removing the last item or appending one more is fine.
            // Let's Append one more of the FIRST item type if we are even.

            if (items.length % 2 === 0) {
                const first = items[0].cloneNode(true);
                first.classList.remove('active');
                first.classList.remove('hidden-element');
                first.classList.remove('show-element');
                track.appendChild(first);
            }
        }

        function alignVideoTrack(animate = false) {
            const track = document.getElementById('videoTrack');
            if (!track) return;

            const container = document.querySelector('.video-carousel-container');
            const { itemWidth, totalWidth, items } = getVideoMetrics();

            if (items.length === 0) return;

            const middleIndex = Math.floor(items.length / 2);
            // Calculate center of that item relative to track start
            const trackItemCenter = (middleIndex * totalWidth) + (itemWidth / 2);
            const containerCenter = container.offsetWidth / 2;
            const offset = containerCenter - trackItemCenter;

            if (animate) {
                track.style.transition = "transform 0.5s ease-in-out";
            } else {
                track.style.transition = "none";
            }

            track.style.transform = `translateX(${offset}px)`;

            // Force cleanup of all active classes
            items.forEach(item => item.classList.remove('active'));
            // Set middle active
            if (items[middleIndex]) items[middleIndex].classList.add('active');

            return offset;
        }

        // --- NEW LOADER FUNCTION FOR FACADE ---
        function loadVideo(element, videoId) {
            element.innerHTML = `
                <iframe width="560" height="315" 
                    src="https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&controls=1" 
                    title="YouTube video player" frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                    allowfullscreen>
                </iframe>
            `;
            element.onclick = null;
            element.style.cursor = 'default';
        }

        function moveVideoNext() {
            if (isVideoAnimating) return;
            isVideoAnimating = true;

            const track = document.getElementById('videoTrack');
            if (!track) return;

            const baseOffset = alignVideoTrack(false);

            const { totalWidth, items } = getVideoMetrics();
            const middleIndex = Math.floor(items.length / 2);

            // Zoom effect transition
            // We know middleIndex is the current center. We are moving Left, so middleIndex+1 becomes center.
            if (items[middleIndex]) items[middleIndex].classList.remove('active');
            if (items[middleIndex + 1]) items[middleIndex + 1].classList.add('active');

            requestAnimationFrame(() => {
                track.style.transition = "transform 0.5s ease-in-out";
                track.style.transform = `translateX(${baseOffset - totalWidth}px)`;
            });

            setTimeout(() => {
                track.style.transition = "none";
                track.appendChild(track.firstElementChild); // Move first to last

                // CRITICAL: Re-align to fix any sub-pixel drift and ensure mathematically perfect center
                alignVideoTrack(false);

                isVideoAnimating = false;
            }, 500);
        }

        function moveVideoPrev() {
            if (isVideoAnimating) return;
            isVideoAnimating = true;

            const track = document.getElementById('videoTrack');
            if (!track) return;

            // 1. Instant Setup: Move last to first PREEMPTIVELY
            track.prepend(track.lastElementChild);

            // Now we are "one item to the left" of where we want to be visually?
            // Wait, if we prepend, the whole row shifts right. 
            // We need to compensate by shifting the track LEFT by one item width immediately (no anim)

            // However, our alignVideoTrack calculates based on "Current Middle".
            // If we added item to front, the "Middle" index might have shifted or the content at Middle changed.

            // Let's stick to the robust logic:
            // 1. Calculate where we would be if we were perfectly aligned NOW (post-prepend).
            // The item that WAS at middle is now at middle+1? 
            // Actually, simply calling alignVideoTrack(false) aligns the CURRENT set of items so the middle one is centered.
            // But we want the visual state to match the "Previous" state before the slide.

            // Let's do the manual offset trick for seamlessness:
            // Get metrics
            const { totalWidth } = getVideoMetrics();

            // Re-Align instantly to center the NEW middle item (which was the one to the left of old middle?)
            // If we prepend, the array shifts. 
            // Visual Sequence: [A] [B] [C] [D] [E] -> C is center.
            // Move Prev -> We want B to be center.
            // Prepend E -> [E] [A] [B] [C] [D]. New Center is B.
            // If we valid alignVideoTrack(false) NOW, B will be centered.
            // But visually, we want to start from "C was centered" (which is now one unit right of center).
            // So we start from (CenterOffset - TotalWidth).

            const offset = alignVideoTrack(false); // This centers B (the new middle)

            // FORCE START POSITION: Shift left so "C" is back in the center visually
            track.style.transition = "none";
            track.style.transform = `translateX(${offset - totalWidth}px)`;

            // Temporarily Force "C" (now at middle+1) to be active for the smooth transition look
            const items = Array.from(track.children);
            const middleIndex = Math.floor(items.length / 2);

            // Our alignVideoTrack made 'middleIndex' (B) active. Undo that for a moment for the animation start state.
            items[middleIndex].classList.remove('active');
            if (items[middleIndex + 1]) items[middleIndex + 1].classList.add('active'); // "C" is active

            // Force Reflow
            void track.offsetWidth;

            // 2. Animate to Center (Slide Right)
            requestAnimationFrame(() => {
                track.style.transition = "transform 0.5s ease-in-out";
                track.style.transform = `translateX(${offset}px)`; // Slide to B being center

                // Swap Active Class during animation (or start of it? usually simultaneous looks ok)
                // Let's do the cross-fade (scale change) during transition
                if (items[middleIndex + 1]) items[middleIndex + 1].classList.remove('active'); // Shrink C
                if (items[middleIndex]) items[middleIndex].classList.add('active'); // Grow B
            });

            setTimeout(() => {
                isVideoAnimating = false;
                // Final hard align just in case
                alignVideoTrack(false);
            }, 500);
        }

        // Init Video Carousel
        document.addEventListener("DOMContentLoaded", () => {
            // 1. Ensure enough items for infinite loop + Odd number for symmetry
            ensureOddItems();

            // 2. Initial Align
            setTimeout(() => alignVideoTrack(false), 100);

            window.addEventListener('resize', () => {
                if (!isVideoAnimating) alignVideoTrack(false);
            });
        });
    </script>
    <script>
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('show-element');
                }
            });
        });

        const hiddenElements = document.querySelectorAll('.hidden-element');
        hiddenElements.forEach((el) => observer.observe(el));
    </script>

    <script>
        /* --- TOUCH SWIPE SUPPORT --- */
        function addSwipeSupport(container, moveNextCallback, movePrevCallback) {
            let touchStartX = 0;
            let touchEndX = 0;
            const minSwipeDistance = 50;

            container.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });

            container.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });

            function handleSwipe() {
                const distance = touchStartX - touchEndX;

                // If swipe distance is significant
                if (Math.abs(distance) > minSwipeDistance) {
                    if (distance > 0) {
                        // Swiped Left (Finger moves Right to Left) -> Show Next Item
                        moveNextCallback();
                    } else {
                        // Swiped Right (Finger moves Left to Right) -> Show Prev Item
                        movePrevCallback();
                    }
                }
            }
        }

        // 2. Trackpad / Wheel Scroll
        function addWheelSupport(container, moveNextCallback, movePrevCallback) {
            let isScrolling = false;

            container.addEventListener('wheel', (e) => {
                // Check if the scroll is primarily horizontal
                if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
                    e.preventDefault(); // Prevent browser back/forward history navigation

                    if (isScrolling) return;

                    // Threshold to filter accidental tiny movements
                    if (Math.abs(e.deltaX) > 10) {
                        isScrolling = true;

                        if (e.deltaX > 0) {
                            // Scroll Right -> Next Item
                            moveNextCallback();
                        } else {
                            // Scroll Left -> Prev Item
                            movePrevCallback();
                        }

                        // Cooldown to prevent rapid-fire skipping
                        setTimeout(() => {
                            isScrolling = false;
                        }, 800);
                    }
                }
            }, { passive: false });
        }

        document.addEventListener("DOMContentLoaded", () => {
            // Experience Carousel
            const expContainer = document.querySelector('.carousel-container');
            if (expContainer) {
                addSwipeSupport(expContainer, moveNext, movePrev);
                addWheelSupport(expContainer, moveNext, movePrev);

                // Handle AutoPlay pausing on touch interaction
                if (typeof stopAutoPlay === 'function' && typeof startAutoPlay === 'function') {
                    expContainer.addEventListener('touchstart', stopAutoPlay, { passive: true });
                    expContainer.addEventListener('touchend', startAutoPlay, { passive: true });
                }
            }

            // Video Carousel
            const videoContainer = document.querySelector('.video-carousel-container');
            if (videoContainer) {
                addSwipeSupport(videoContainer, moveVideoNext, moveVideoPrev);
                addWheelSupport(videoContainer, moveVideoNext, moveVideoPrev);
            }
        });
    </script>
    <script>
        // Smooth scroll for Header Brand Name
        document.addEventListener("DOMContentLoaded", () => {
            const brandLink = document.querySelector('.navbar-brand a');
            if (brandLink) {
                brandLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
        });
    </script>
</body>


</html>